<html>

<head>
</head>

<body style=" background: lightblue;">
    <canvas id="canvas" width="420px" height="420px" style="background: #fff;margin:20px;"></canvas>

    <script type='text/javascript'>

		var context = document.getElementById("canvas").getContext("2d");

		function drawCell(x,y){
			context.fillStyle = "#FF0000";
			context.fillRect(x * 40, y * 40,40,40);
		}


		function Grid(cells) {
			this.cells = cells;

			var neighbourCount = function(cell, cells) {
				var neighbours = 0;
				for (var j = 0; j < cells.length; j++) {
					var otherCell = cells[j];
					if (cell.x != otherCell.x && cell.y != otherCell.y && 
						Math.abs(cell.x - otherCell.x) <= 1 && Math.abs(cell.y - otherCell.y) <= 1) {
						neighbours++;
					}
				}
			}

			this.tick = function() {
				console.log('tick');
				var liveCells = [];
				for (var i = 0; i < this.cells.length; i++) {
					var cell = this.cells[i];
					var neighbours = neighbourCount(cell, this.cells);
					if (neighbours > 1 && neighbours < 4) {
						liveCells.push(cell);
					}
				}
				this.cells = liveCells;
			}
		};

		var grid = new Grid([{x:5, y:5}, {x:5, y:4}]);

		var drawGrid = function(grid) {
					context.clearRect(0,0,420,420);
			// TODO clear grid
			for (var i = 0; i < grid.cells.length; i++) {
				var cell = grid.cells[i];
				drawCell(cell.x, cell.y);
			}
		}

		drawGrid(grid);
		window.setInterval(function() {
			drawGrid(grid);
			grid.tick();
		}, 2000);
    </script>
</body>

</html>